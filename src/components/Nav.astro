---
import Button from "@components/Button.astro";

const links = [
  { href: "/", label: "Home" },
  { href: "/case/", label: "Case Study" },
  { href: "/team/", label: "Team" },
  { href: "/about/", label: "About" },
];

const currentPath = Astro.url.pathname;

function isActive(linkHref) {
  if (linkHref === "/") {
    return currentPath === "/";
  }
  return currentPath.startsWith(linkHref);
}
---

<header class="site-header" role="banner">
  <div class="nav-wrap">
    <a href="/" class="brand" aria-label="AskExperts home">AskExperts</a>

    <nav class="primary-nav" aria-label="Main navigation">
      <ul class="nav-list">
        {
          links.map((link) => (
            <li>
              <a
                href={link.href}
                class={isActive(link.href) ? "active" : ""}
                aria-current={isActive(link.href) ? "page" : undefined}
              >
                {link.label}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>

    <div class="actions">
      <Button
        variant="yellow"
        size="small"
        type="button"
        data-open-modal="login"
        label="Login"
      />
    </div>
  </div>

  <style>
    @layer components {
      .site-header {
        width: 100%;
        background: rgba(27, 27, 27, 0.91);
        backdrop-filter: blur(10.5px);
      }

      .nav-wrap {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        max-width: 1200px;
        width: 100%;
        margin-inline: auto;
        padding: 38px;
      }

      .brand {
        color: #fff;
        font-family: "Cabin", sans-serif;
        font-size: 30px;
        font-weight: 600;
        line-height: 105%;
        text-decoration: none;
      }

      .nav-list {
        display: flex;
        gap: 38px;
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .nav-list a {
        color: #fff;
        font-family: "Lato", sans-serif;
        font-size: 17.7px;
        font-weight: 400;
        line-height: 160%;
        text-decoration: none;
        transition: opacity 0.2s;
      }
      .nav-list a:hover {
        opacity: 0.8;
      }

      .nav-list a.active {
        font-weight: 600;
      }

      .actions {
        display: flex;
        align-items: center;
      }

      @media (max-width: 900px) {
        .nav-wrap {
          flex-direction: column;
          align-items: center;
          gap: 16px;
        }
        .nav-list {
          gap: 24px;
        }
      }
    }
  </style>
</header>
